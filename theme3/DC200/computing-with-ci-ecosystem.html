<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Karan Vahi">
<meta name="dcterms.date" content="2025-05-08">

<title>Computing with CI Ecosystem – X-CITE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ef56b68f8fa1e9d2ba328e99e439f80.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d569885fc010eb998ddf20f357a9a761.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-306d40c9c86e7331cee2d05936f14859.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-d569885fc010eb998ddf20f357a9a761.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LSVR8LKB1J"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-LSVR8LKB1J', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Computing with CI Ecosystem – X-CITE">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://xcitecourse.org/theme3/DC200/images/chess-operational-wf.png">
<meta name="twitter:image-height" content="186">
<meta name="twitter:image-width" content="1686">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">X-CITE</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview-of-chess-operational-workflow" id="toc-overview-of-chess-operational-workflow" class="nav-link active" data-scroll-target="#overview-of-chess-operational-workflow">Overview of CHESS Operational Workflow</a></li>
  <li><a href="#chess-ci-resources-at-cornell" id="toc-chess-ci-resources-at-cornell" class="nav-link" data-scroll-target="#chess-ci-resources-at-cornell">CHESS CI Resources at Cornell</a>
  <ul class="collapse">
  <li><a href="#getting-access" id="toc-getting-access" class="nav-link" data-scroll-target="#getting-access">Getting access</a></li>
  <li><a href="#daq-cluster" id="toc-daq-cluster" class="nav-link" data-scroll-target="#daq-cluster">DAQ Cluster</a></li>
  <li><a href="#compute-farm" id="toc-compute-farm" class="nav-link" data-scroll-target="#compute-farm">Compute Farm</a></li>
  <li><a href="#job-submission" id="toc-job-submission" class="nav-link" data-scroll-target="#job-submission">Job Submission</a></li>
  </ul></li>
  <li><a href="#access" id="toc-access" class="nav-link" data-scroll-target="#access">ACCESS</a>
  <ul class="collapse">
  <li><a href="#access-user-registration" id="toc-access-user-registration" class="nav-link" data-scroll-target="#access-user-registration">ACCESS User Registration</a></li>
  <li><a href="#getting-an-allocation" id="toc-getting-an-allocation" class="nav-link" data-scroll-target="#getting-an-allocation">Getting an Allocation</a></li>
  <li><a href="#logging-to-the-access-resource" id="toc-logging-to-the-access-resource" class="nav-link" data-scroll-target="#logging-to-the-access-resource">Logging to the ACCESS resource</a></li>
  <li><a href="#submitting-jobs" id="toc-submitting-jobs" class="nav-link" data-scroll-target="#submitting-jobs">Submitting Jobs</a></li>
  <li><a href="#access-support" id="toc-access-support" class="nav-link" data-scroll-target="#access-support">ACCESS Support</a></li>
  </ul></li>
  <li><a href="#osg-and-path-facilities" id="toc-osg-and-path-facilities" class="nav-link" data-scroll-target="#osg-and-path-facilities">OSG and PATh Facilities</a>
  <ul class="collapse">
  <li><a href="#what-type-of-jobs-are-good-fit-for-ospool" id="toc-what-type-of-jobs-are-good-fit-for-ospool" class="nav-link" data-scroll-target="#what-type-of-jobs-are-good-fit-for-ospool">What type of jobs are good fit for OSPool</a></li>
  <li><a href="#osg-user-registration" id="toc-osg-user-registration" class="nav-link" data-scroll-target="#osg-user-registration">OSG User Registration</a></li>
  <li><a href="#submitting-jobs-1" id="toc-submitting-jobs-1" class="nav-link" data-scroll-target="#submitting-jobs-1">Submitting jobs</a></li>
  <li><a href="#path" id="toc-path" class="nav-link" data-scroll-target="#path">PATh</a></li>
  <li><a href="#os-pool-vs-path" id="toc-os-pool-vs-path" class="nav-link" data-scroll-target="#os-pool-vs-path">OS Pool vs PATh</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/RENCI-NRIG/X-CITE/edit/main/theme3/DC200/computing-with-ci-ecosystem.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/RENCI-NRIG/X-CITE/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Computing with CI Ecosystem</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Karan Vahi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 8, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This page is work in progress.</p>
</div>
</div>
<p>This module provides an overview of the various Cyberinfrastructure (CI) resources available to a CHESS researcher and more broadly to all the researchers based in the US.</p>
<p>Before we go into the various offerings available, it is useful to recap what we mean by CI. A widely used and accepted definition of CI by <a href="https://dl.acm.org/doi/10.1145/1878335.1878347">Craig A. Stewart et al</a> is as follows:</p>
<p><em>Cyberinfrastructure consists of computing systems, data storage systems, advanced instruments and data repositories, visualization environments, and people, all linked together by software and high performance networks to improve research productivity and enable breakthroughs not otherwise possible.</em></p>
<p>As a CHESS researcher, you have access to the following CI resources that can help you with computing</p>
<ul>
<li>CHESS CI Resources at Cornell</li>
<li>ACCESS</li>
<li>PATh / OSG</li>
</ul>
<section id="overview-of-chess-operational-workflow" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-chess-operational-workflow">Overview of CHESS Operational Workflow</h2>
<p>Below is a high level overview of an overall chess operational workflow from the time a researcher puts in a proposal to use a beamline at CHESS to data collection from the beamline; and then it’s subsequent data processing and analysis before final data curation on the outputs is done.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/chess-operational-wf.png" class="img-fluid figure-img"></p>
<figcaption>Overview of a general CHESS Operational Workflow</figcaption>
</figure>
</div>
<p>CHESS’ workflow complexity is the length of time spent performing a typical data analysis. According to a CHESS survey conducted a few years back, CHESS’ workflow complexity ranges from 1 month to 24 months among survey respondents (with the average being 7.2 months). For the most complex workflows (12 months or longer), researchers often run into challenges regarding completing their data processing within the defined time constraints.</p>
<p>Use of National CI resources, can especially help CHESS researchers in the following areas</p>
<ul>
<li>Processing data (reduction, analysis, simulation, interpretation), handling large data sets, leveraging existing software and CI.</li>
<li>Metadata management, Open Science/FAIR and data curation.</li>
</ul>
</section>
<section id="chess-ci-resources-at-cornell" class="level2">
<h2 class="anchored" data-anchor-id="chess-ci-resources-at-cornell">CHESS CI Resources at Cornell</h2>
<p>The CLASSE cyberinfrastructure (CI) consists of an interconnected series of h high-availability server clusters (HACs), data acquisition systems, control systems, compute farms, and workstations. Most of these systems run either Scientific Linux or Windows on commodity 64-bit Intel-based hardware and are centrally managed using Puppet. The median age of key CI components is approximately 5 years, with an average refresh rate of once every 10 years. The picture below provides an overview of the CHESS CI</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/chess-ci.png" class="img-fluid figure-img"></p>
<figcaption>CHESS CI immediately available for processing/analysis by users on the Compute Farm</figcaption>
</figure>
</div>
<section id="getting-access" class="level3">
<h3 class="anchored" data-anchor-id="getting-access">Getting access</h3>
<p>In order to access the Cornell CI resources, you need a Cornell Laboratory for Accelerator-based ScienceS and Education(CLASSE) account.</p>
<p>CHESS users can request a CLASSE account through the <a href="https://webapps.chess.cornell.edu/beampass/login.xhtml">CHESS User Dashboard (BeamPASS)</a>.</p>
<p>More info in the <a href="https://www.chess.cornell.edu/user-guide">user guide</a>, under <em>“Activate your CLASSE Account”</em>.</p>
</section>
<section id="daq-cluster" class="level3">
<h3 class="anchored" data-anchor-id="daq-cluster">DAQ Cluster</h3>
<p>DAQ Cluster is the Data Acquisition System that runs on a dedicated server cluster. Makes available to researchers about <strong>2PB</strong> of storage for raw data collection, analysis, and simulation. Data collected at the stations written directly to the DAQ over either NFS or Samba and is immediately available for processing/analysis by users on the Compute Farm.</p>
<p>CHESS users can also download their data remotely using the CLASSE Globus Connect Server or via SFTP.</p>
</section>
<section id="compute-farm" class="level3">
<h3 class="anchored" data-anchor-id="compute-farm">Compute Farm</h3>
<p>The HPC Cluster at CHESS/CLASSE is a central resource consisting of</p>
<ul>
<li>central resource of 60+ enterprise-class Linux nodes (with around 800 CPUs)</li>
<li>4.5TB of memory</li>
<li>uses SGE as a front-end queueing system</li>
<li>supports interactive, batch, parallel, and GPU jobs</li>
<li>ensures equal access to the Compute Farm for all users.</li>
</ul>
<p>This cluster is suited for doing both HPC and HTC type jobs.</p>
<section id="login-node-and-other-information" class="level4">
<h4 class="anchored" data-anchor-id="login-node-and-other-information">Login Node and other information</h4>
<p>The CHESS cluster login node is to use ssh to login to <em>lnx201.classe.cornell.edu</em> which is the headnode of the cluster.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="op">&lt;</span>your CLASSE username<span class="op">&gt;</span>@lnx201.classe.cornell.edu</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There is also a shared filesystem available across all the nodes in the cluster. This can be accessed at <em>/nfs/chess/user/<your-classe-username></your-classe-username></em> .</p>
<p>A complete list of various filesystems accessible can be found at <a href="https://www.classe.cornell.edu/private/computing/filesystems.html">CLASSE Wiki</a>.</p>
</section>
</section>
<section id="job-submission" class="level3">
<h3 class="anchored" data-anchor-id="job-submission">Job Submission</h3>
<p>The CHESS cluster uses <strong>SGE</strong> as the front end scheduling system to submit jobs.</p>
<p>In general, there are two basic steps to submitting a job</p>
<ol type="1">
<li>Create a shell script containing the commands to be run</li>
<li>Submit this script to the Compute Farm using the qsub command.</li>
</ol>
<p>Below is a simple shell script <strong>myscript.sh</strong> that you can submit to the SLURM cluster if you are logged onto lnx201.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[user@lnx201</span> ~]$ cat myscript.sh</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> Running on host: <span class="kw">`</span><span class="fu">hostname</span><span class="kw">`</span>.</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> Starting on: <span class="kw">`</span><span class="fu">date</span><span class="kw">`</span>.</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sleep</span> 10</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> Ending on: <span class="kw">`</span><span class="fu">date</span><span class="kw">`</span>.</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -q all.q</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -S /bin/bash</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l mem_free=8G</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In order to submit it to the cluster you can use <em>qsub</em> command</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[user@lnx201</span> ~]$ qsub <span class="at">-q</span> all.q myscript.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Detailed instructions about this can be found at <a href="https://wiki.classe.cornell.edu/Computing/GridEngine">CLASSE Wiki</a>.</p>
<p>If you want to submit job to another queue, you can change the -q option. In order to see all the queues on the cluster, you can run the following command.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[user@lnx201</span> ~]$ qconf <span class="at">-sql</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">all.q</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">benchmark.q</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">chess.q</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">chess_fast.q</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">...</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="ex">chess_xleap_interactive.q</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">interactive.q</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The above output is shortened for display purposes.</p>
</section>
</section>
<section id="access" class="level2">
<h2 class="anchored" data-anchor-id="access">ACCESS</h2>
<p><a href="https://access-ci.org/about/">ACCESS CI</a> is a program established and funded by the National Science Foundation (NSF) to help researchers and educators utilize the nation’s advanced computing systems and services. ACCESS is a collection of both large and experimental HPC resources.</p>
<p>ACCESS provides a wide range of resources and services:</p>
<ul>
<li>Systems ranging from supercomputers to smaller specialized compute clusters, each with a different focus and unique set of capabilities</li>
<li>Data and storage services</li>
<li>Expertise to help you make effective use of resources, remove barriers, and achieve your goals</li>
<li>Scientific applications</li>
<li>Science gateways</li>
</ul>
<p>Some of the resources available are listed below</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Leadership Class</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Frontera</td>
<td>University of Texas, Austin</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Innovative Production Systems</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Anvil</td>
<td>Purdue University</td>
</tr>
<tr class="even">
<td>Bridges 2</td>
<td>Carnegie-Mellon University</td>
</tr>
<tr class="odd">
<td>Delta/ DeltaAI</td>
<td>U of Illinois Urbana-Champaign</td>
</tr>
<tr class="even">
<td>Expanse</td>
<td>U of California, San Diego</td>
</tr>
<tr class="odd">
<td>Jetstream 2</td>
<td>University of Indiana + Partners</td>
</tr>
<tr class="even">
<td>Stampede 2</td>
<td>U of Texas, Austin</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Prototypes/Testbeds</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Neocortex</td>
<td>Carnegie-Mellon University</td>
</tr>
<tr class="even">
<td>Voyager</td>
<td>U of California, San Diego</td>
</tr>
<tr class="odd">
<td>Ookami</td>
<td>Stonybrook University</td>
</tr>
<tr class="even">
<td>NRP</td>
<td>U of California, San Diego</td>
</tr>
<tr class="odd">
<td>ACES</td>
<td>Texas A&amp;M University</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Cloud Technology Resources</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cloudbank</td>
<td>U of California, San Diego</td>
</tr>
<tr class="even">
<td>CloudLab</td>
<td>University of Utah</td>
</tr>
<tr class="odd">
<td>Chameleon</td>
<td>University of Chicago</td>
</tr>
</tbody>
</table>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/access-resources-map.png" class="img-fluid figure-img"></p>
<figcaption>Location of various ACCESS Resources</figcaption>
</figure>
</div>
<p>Of the resources above, the leadership class system and most of the Innovative Production Systems are HPC clusters, very similar to the CHESS HPC cluster at Cornell. The main difference being that they use <strong>SLURM</strong> as their frontend queueing system instead of SGE.</p>
<section id="access-user-registration" class="level3">
<h3 class="anchored" data-anchor-id="access-user-registration">ACCESS User Registration</h3>
<p>In order to use ACCESS resources, you first need to request an ACCESS user account. This account is required for you to login to the ACCESS website, manage your allocations (more on it in the next section).</p>
<p>Getting an ACCESS user account is fairly straightforward. Instructions for getting it can be found <a href="https://operations.access-ci.org/identity/new-user">here</a>. Using an <strong>existing University account</strong> when registering with ACCESS <strong>simplifies the sign-up process</strong> and enables you to log in to ACCESS using that existing account.</p>
</section>
<section id="getting-an-allocation" class="level3">
<h3 class="anchored" data-anchor-id="getting-an-allocation">Getting an Allocation</h3>
<p>To get started, you need an ACCESS project and some resource units you can spend. Your ACCESS project and resource units are what we refer to as an Allocation. An allocation is your project to use a portion of a shared resource.</p>
<p>Through ACCESS, you can get an allocation to use computing and data resources to accomplish your research or classroom objectives.</p>
<p>You can get allocation for 4 different types of projects which are listed below.</p>
<ul>
<li><p><strong>EXPLORE</strong> — Great for resource evaluation, graduate student projects,<br>
small classes and training events, benchmarking, code development and porting, and similar small-scale uses.</p></li>
<li><p><strong>DISCOVER</strong> — Designed for research grants with modest resource needs, Campus Champions, large classes and training events, graduate student projects, benchmarking and code testing at scale, and gateway development.</p></li>
<li><p><strong>ACCELERATE</strong> — Best for experienced users with mid-scale resource needs, consolidating multi-grant programs, collaborative projects, preparing for Maximize ACCESS requests, and gateways with growing communities.</p></li>
<li><p><strong>MAXIMIZE</strong> — The choice for large-scale research activities that need more resources than the limit for Accelerate ACCESS projects.</p></li>
</ul>
<p>The <em>EXPLORE</em> requests are easiest to get with <em>MAXIMIZE</em> the hardest (in terms of supporting documentation required). The <em>EXPLORE</em> request will get you 400,000 ACCESS credits/SUs to start with, which is enough to explore suitability of these resources for your processing needs.</p>
<p>More details including a detailed comparison table can be found <a href="https://allocations.access-ci.org/project-types">here</a>.</p>
</section>
<section id="logging-to-the-access-resource" class="level3">
<h3 class="anchored" data-anchor-id="logging-to-the-access-resource">Logging to the ACCESS resource</h3>
<p>Once, you have your allocation approved then in the <a href="https://allocations.access-ci.org">Allocations portal</a> you can assign your credits to a particular resource that you are interested in. Once that is done, the Resource Provider will contact you to setup your local HPC accounts.</p>
<p>Once that is done, you can * register your ssh keys to login to your account on the HPC resource.</p>
<p>Additionally, most of the ACCESS resources have <a href="https://support.access-ci.org/tools/ondemand">Open OnDemand</a> installed, that allow you to access and login to the clusters using a web front-end. Open OnDemand is an easy-to-use web portal that is being deployed on ACCESS resources to allow researchers to compute from anywhere without client software or command-line interface, and significantly speed up the time to science.</p>
</section>
<section id="submitting-jobs" class="level3">
<h3 class="anchored" data-anchor-id="submitting-jobs">Submitting Jobs</h3>
<p>You can login to the headnodes of these resources, and submit jobs to the SLURM clusters in a similar fashion that you submit jobs on the CHESS cluster.</p>
<p>Additionally, all the ACCESS resources that have an Open OnDemand install, allow you to launch <strong>Jupyter notebooks</strong> to run your analysis.</p>
<p>You can also use workflow systems such as <a href="https://pegasus.isi.edu">Pegasus</a> to run your analysis pipelines on ACCESS resources. One easy way to explore Pegasus workflows is to use <a href="https://support.access-ci.org/tools/pegasus">ACCESS Pegasus</a>.</p>
</section>
<section id="access-support" class="level3">
<h3 class="anchored" data-anchor-id="access-support">ACCESS Support</h3>
<p>ACCESS does provide support for researchers looking to leverage their resources. The support comes in various flavors as illustrated in the picture below.</p>
<p><a href="https://support.access-ci.org">ACCESS Support</a> provides researchers with access to</p>
<ul>
<li>Tools, growing knowledge base</li>
<li>Match-making with experts</li>
<li>Student engagement</li>
<li>Engagement from community</li>
</ul>
<p>ACCESS provides <a href="https://support.access-ci.org/match/overview">Match services</a> (Tier 3 and Tier 4) which connects researchers with experts to help you select the right system, run on a supercomputer, and solve basic code and research problems.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/access-support-pyramid.png" class="img-fluid figure-img"></p>
<figcaption>ACCESS Support Tiers</figcaption>
</figure>
</div>
</section>
</section>
<section id="osg-and-path-facilities" class="level2">
<h2 class="anchored" data-anchor-id="osg-and-path-facilities">OSG and PATh Facilities</h2>
<p><a href="https://path-cc.io">PATh</a> and <a href="https://osg-htc.org">OSG</a> make up the <strong>OSG Consortium</strong> that builds and operates a set of pools of shared computing and data capacity for distributed high-throughput computing (dHTC).</p>
<p>The OSG Consortium builds and operates a set of HTCondor pools of shared computing and data capacity for distributed high-throughput computing (dHTC). Each pool is organized and operated to serve a particular research community (e.g.&nbsp;a campus, multi-institutional collaboration, etc.), using technologies and services provided by the core OSG Team. One of these pools, known as the <strong>Open Science Pool</strong> is operated for all of US-associated open science.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/osg-resources-map.png" class="img-fluid figure-img"></p>
<figcaption>OSPools Geographic Distribution</figcaption>
</figure>
</div>
<p><strong>Image Credit:</strong> OSG Research Facilitation Team</p>
<p>One of the most attractive features of using the OSPool is that it has a <strong>No Proposal, No Allocation, No Cost</strong> principle. It povides its users with fair-share access to compute and storage capacity contributed by university campuses, and government-supported supercomputing institutions.</p>
<section id="what-type-of-jobs-are-good-fit-for-ospool" class="level3">
<h3 class="anchored" data-anchor-id="what-type-of-jobs-are-good-fit-for-ospool">What type of jobs are good fit for OSPool</h3>
<p>The OSPool is made up of mostly opportunistic capacity - contributing clusters may interrupt jobs at any time. Thus, the OSPool supports workloads of numerous jobs that individually complete or checkpoint within 20 hours.</p>
<p>The OSG consortium provides guidance on what type of jobs are a good fit. It is replicated from the <a href="https://osg-htc.org/services/ospool/">OSPool website</a> below.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 26%">
<col style="width: 21%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Ideal Jobs!</strong></th>
<th><strong>Still very advantageous</strong></th>
<th><strong>Maybe not, but get in touch!</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Expected Throughput, per user</strong></td>
<td>1000s concurrent cores</td>
<td>100s concurrent cores</td>
<td>Let’s discuss!</td>
</tr>
<tr class="even">
<td><strong>CPU</strong></td>
<td>1 per job</td>
<td>&lt; 8 per job</td>
<td>&gt; 8 per job</td>
</tr>
<tr class="odd">
<td><strong>Walltime</strong></td>
<td>&lt; 10 hrs*</td>
<td>&lt; 20 hrs*</td>
<td>&gt; 20 hrs</td>
</tr>
<tr class="even">
<td><strong>RAM</strong></td>
<td>&lt; few GB</td>
<td>&lt; 40 GB</td>
<td>&gt; 40 GB</td>
</tr>
<tr class="odd">
<td><strong>Input</strong></td>
<td>&lt; 500 MB</td>
<td>&lt; 10 GB</td>
<td>&gt; 10 GB**</td>
</tr>
<tr class="even">
<td><strong>Output</strong></td>
<td>&lt; 1 GB</td>
<td>&lt; 10 GB</td>
<td>&gt; 10 GB**</td>
</tr>
<tr class="odd">
<td><strong>Software</strong></td>
<td>pre-compiled binaries, containers</td>
<td>Most other than →</td>
<td>Licensed Software, non-Linux</td>
</tr>
</tbody>
</table>
</section>
<section id="osg-user-registration" class="level3">
<h3 class="anchored" data-anchor-id="osg-user-registration">OSG User Registration</h3>
<p>To get started with the OSPool, please complete the account application <a href="https://portal.osg-htc.org/application">here</a>. After submitting the form, you’ll receive an invitation to a new user meeting with an OSG facilitator. During the meeting, you’ll get an overview of OSG and discuss how to run your computations on the platform. Your account and project will be set up following this meeting.</p>
</section>
<section id="submitting-jobs-1" class="level3">
<h3 class="anchored" data-anchor-id="submitting-jobs-1">Submitting jobs</h3>
<p>Submitting jobs involves logging into one of the OSG Access points, from where you can submit a job using HTCondor or a workflow tool like Pegasus to the OSPool. Submitting the job is similar to how you submit a job on your local HPC cluster. The main difference is that you are interacting with HTCondor not SLURM or SGE.</p>
<p>Another <strong>important difference</strong> to keep in mind is that unlike HPC clusters, you <strong>cannot expect a shared filesystem</strong> between the login node (from where you submit the job) and the nodes on which your jobs execute. The nodes on which your jobs run are geographically distributed as illustrated in the figure below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/osg-submitting-jobs.png" class="img-fluid figure-img"></p>
<figcaption>OSPools Job Submission</figcaption>
</figure>
</div>
<p><strong>Image Credit:</strong> OSG Research Facilitation Team</p>
</section>
<section id="path" class="level3">
<h3 class="anchored" data-anchor-id="path">PATh</h3>
<p>The <a href="https://path-cc.io">PATh Facility</a> is part of a pilot project funded by the NSF Office of Advanced Cyberinfrastructure. NSF-funded researchers can apply to request credits for the PATh facility. In that aspect, PATh is also similar to <strong>ACCESS</strong> resources in that you need to apply for credits to run on these resources.</p>
<p>Composed of current gen hardware, the PATh facility provides users access to</p>
<ul>
<li>30,000 cores and</li>
<li>36 A100 GPUs</li>
</ul>
<p>PATh user registration can be found on the <a href="https://portal.path-cc.io/documentation/overview/account_setup/getting-started/">PATh website</a>.</p>
</section>
<section id="os-pool-vs-path" class="level3">
<h3 class="anchored" data-anchor-id="os-pool-vs-path">OS Pool vs PATh</h3>
<p>A researcher’s experience on PATh Facility and OSG’s Open Science Pool (OSPool) compute systems is similar: both offer thousands of CPU resources, as well as GPUs, disk space for saving actively-used data, and support technologies such as containerized software and checkpointing. They also both use a HTCondor Software Suite as a job scheduling software, which specializes in managing large high-throughput workflows.</p>
<p>The main differences between the two are</p>
<ol type="1">
<li>OSPool is open to any US-affiliated academic, non-profit, or government research projects while PATh is available to only researchers with accepted or active NSF award with selected <a href="https://portal.path-cc.io/documentation/overview/account_setup/getting-started/#meet-path-facility-criteria">affiliated programs</a>.</li>
<li>PATh uses <em>compute</em> credit system to request resources.</li>
<li>On PATh researchers can request larger amounts of CPU/GPUs, more memory, disk space, and a longer runtime and are guaranteed these resources until their job completes.</li>
</ol>
<p>Full details on these differences can be found <a href="https://portal.path-cc.io/documentation/overview/references/PATh_vs_OSPool/">here</a>.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/xcitecourse\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>X-CITE is supported by the NSF under award numbers <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2320373">OAC-2320373</a>, <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2320374">OAC-2320374</a>, and <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2320375">OAC-2320375</a>.</p>
<p>Contact <a href="mailto:anirban@renci.org">anirban@renci.org</a> for more information.</p>
<p>This page is available under the <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> license.</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RENCI-NRIG/X-CITE/edit/main/theme3/DC200/computing-with-ci-ecosystem.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/RENCI-NRIG/X-CITE/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>